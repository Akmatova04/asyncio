# Керектүү модулдарды импорттоо
import asyncio  # Асинхрондук операциялар үчүн негизги китепкана
import time     # Убакыт менен иштөө үчүн 

# Асинхрондук функция  аныктоо
async def тапшырма_бер(күтүү_убактысы, билдирүү):
    """
    Бул асинхрондук функция  берилген 'күтүү_убактысы'
    секунд бою күтүп, анан 'билдирүү' дегенди чыгарат.
    """
    print(f"'{билдирүү}' тапшырмасы башталды, {күтүү_убактысы} секунд күтөт...")
    # await asyncio.sleep(күтүү_убактысы) - бул маанилүү сап.
    # 'await' бул жерде 'asyncio.sleep' асинхрондук операциясынын
    # аякташын күтөт. Бул күтүү учурунда программа "тоңуп" калбайт,
    # башка асинхрондук тапшырмалар иштей алат (эгер бар болсо).
    await asyncio.sleep(күтүү_убактысы)
    print(f"'{билдирүү}' тапшырмасы аяктады.")
    # Функция жыйынтык кайтарат
    return f"'{билдирүү}' ийгиликтүү аткарылды"

# Негизги асинхрондук функция (корутина)
async def main():
    """
    Бул негизги асинхрондук функция эки 'тапшырма_бер' корутинасын
    'asyncio.gather' аркылуу бир учурда (конкуренттүү) ишке киргизет.
    """
    # Тапшырмалар башталганга чейинки убакытты белгилөө
    баштоо_убактысы = time.time()

    print("asyncio.gather менен тапшырмаларды баштоо...")
    # asyncio.gather() бир нече асинхрондук тапшырманы 
    # бир учурда аткарууга жөнөтөт.
    # Ал бардык берилген тапшырмалар аяктаганча күтөт,
    # анан алардын жыйынтыктарын (return маанилерин) тизме катары кайтарат.
    # Бул жерде эки 'тапшырма_бер' функциясы дээрлик бир убакта башталат.
    жыйынтыктар = await asyncio.gather(
        тапшырма_бер(2, "Узак тапшырма"),  # 2 секунд күтүүчү тапшырма
        тапшырма_бер(1, "Кыска тапшырма")   # 1 секунд күтүүчү тапшырма
    )

    # Бардык тапшырмалар аяктагандан кийинки убакытты белгилөө
    аяктоо_убактысы = time.time()

    print("\nБардык тапшырмалар аткарылды:")
    # 'asyncio.gather' кайтарган жыйынтыктарды чыгаруу
    for жыйынтык in жыйынтыктар:
        print(f"- {жыйынтык}")

    # Жалпы аткаруу убактысын эсептеп чыгаруу
    # Бул болжол менен эң узак тапшырманын убактысына барабар болот (бул учурда ~2 сек).
    print(f"\nЖалпы аткаруу убактысы: {аяктоо_убактысы - баштоо_убактысы:.2f} секунд.")

# Программа түздөн-түз иштетилгенде (башка файлдан импорттолбогондо)
if __name__ == "__main__":
    # asyncio.run() функциясы 'main' асинхрондук функциясын
    # ишке киргизет жана ал аяктаганча күтөт.
    # Бул асинхрондук программаны баштоонун негизги жолу.
    asyncio.run(main())